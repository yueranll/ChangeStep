name: 小支付宝动自动刷步

on:
  schedule:
    # 定时触发：每天北京时间上午 8:30 运行
    # 注意：GitHub 使用的是 UTC 时间，北京时间 (GMT+8) 08:30 等于 UTC 00:30
    - cron: '30 0 * * *'
  workflow_dispatch: # 允许手动点击 "Run workflow" 按钮触发运行
  push:
    branches: [ main ] # 当你向 main 分支推送代码时也会运行一次

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 检出代码
        uses: actions/checkout@v3

      - name: 初始化 Python 环境
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'

      - name: 安装依赖库
        run: |
          pip install requests

      - name: 执行刷步脚本
        env:
          # 此处必须与脚本中的 os.getenv("MI_USER") 对应
          # 请在仓库 Settings -> Secrets -> Actions 中添加名为 MI_USER 的变量
          MI_USER: ${{ secrets.MI_USER }}
        run: python main.py
